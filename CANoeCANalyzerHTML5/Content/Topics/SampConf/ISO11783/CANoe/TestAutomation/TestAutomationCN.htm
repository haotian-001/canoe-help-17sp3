<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeCANalyzer.xml" data-mc-path-to-help-system="../../../../../../" data-mc-conditions="vConditions.CANalyzerExclude" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../../Skins/Favicons/favicon-16x16.png" /><title>Test Automation (ISO11783 Sample Configuration)</title>
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../../../Resources/Stylesheets/vTableSymbol.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../../CANoeCANalyzer.htm#Topics/SampConf/ISO11783/CANoe/TestAutomation/TestAutomationCN.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <p class="StructurePath"><a href="../../../CANoeCANalyzerSampleConfigurations.htm" class="StructurePath">Sample Configurations</a> » <a href="../../SampConfsISO11783.htm" class="StructurePath">ISO11783</a> » Test Automation</p>
                <h1>Test Automation</h1>
                <p class="MenuPath">&#160;</p>
                <p class="AutoSearchFilterConcepts"><a name="aanchor12763"></a>
                    <MadCap:concept term="SFSampConf" />
                </p>
                <p class="IndexConcept"><a name="kanchor10200"></a><a name="kanchor10201"></a>
                </p>
                <div>
                    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                        <col class="TableStyle-vTableSymbol-Column-Column1" />
                        <col class="TableStyle-vTableSymbol-Column-Column2" />
                        <tbody>
                            <tr>
                                <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                    <p class="TableHead">
                                        <img src="../../../../../Resources/vImages/vExample.png" style="width: 48px;height: 45px;" title="Example" alt="Example" />
                                    </p>
                                </td>
                                <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                    <p class="Table">Click on the blue link to load the sample configuration in <span class="Product">CANoe</span>.</p>
                                    <ul>
                                        <li><span class="bold">Test Automation</span> – <span class="bold"><a href="javascript:startCANoeLauncher('&quot;SAMPLES:\\ISO11783\\ISO11783TestAutomation\\CANoeConfiguration\\ISO11783TestAutomation.cfg&quot;')" class="ExecuteLink">ISO11783TestAutomation.cfg</a></span><br />Demonstrates how an ISO11783 sprayer can be tested automatically.</li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <h2>Introduction</h2>
                    <p>The challenge in testing any ISO11783 component, such as a sprayer, consists in controlling all participating simulated devices as simply as possible in order for them to simulate a situation appropriate for the test, so the reaction of the components under test can then be monitored. In the <span class="Product">CANoe</span> option .ISO11783, the following modeling libraries are available:</p>
                    <ul>
                        <li>ISO11783 Interaction Layer</li>
                        <li>VT Interaction Layer</li>
                        <li>TC Interaction Layer</li>
                    </ul>
                    <p>You can use these for simulating and testing of the following ISO11783 components:</p>
                    <ul>
                        <li>Implement</li>
                        <li>File Server</li>
                        <li>TIM Server</li>
                        <li>TIM Client</li>
                        <li>Virtual Terminal</li>
                        <li>Task Controller</li>
                    </ul>
                    <p>Each of the listed components offers you a comprehensive interface that both can configure and control the component (including fault injection) and also allows direct access to the object pool of the simulated component. Control options include both atomic actions (e.g., sending a message) and very complex ones (e.g., using a control in the Virtual Terminal). Most of these actions can be performed with a single function call. This allows very complex tests to be formulated in a clear, concise form as easy-to-read scenarios.</p>
                    <p>The current example implements the following test scenario (all interactions with the user are implemented through the corresponding API calls):</p>
                    <ol>
                        <li value="1">After being switched on, all elements log onto the bus with their addresses. The sprayer is given the opportunity to transfer its object pool to the Virtual Terminal and its device description to the Task Controller.</li>
                        <li value="2">The user starts the task on the Task Controller.</li>
                        <li value="3">The Task Controller defines the <span class="bold">setpoint application rate</span> for the sprayer.</li>
                        <li value="4">The user starts the sprayer via the Virtual Terminal.</li>
                        <li value="5">The user switches on all sections that are present on the sprayer via the Virtual Terminal.</li>
                        <li value="6">The tractor accelerates to the predefined speed within a few seconds.</li>
                        <li value="7">The test checks whether the sprayer sends the correct application rate values (which depend on the speed setting) to the Task Controller.</li>
                    </ol>
                    <p>All above-named steps are implemented in the test unit or test module as individual test cases. You can edit the test unit implementation in <span class="Product">vTESTstudio</span>, the test module implementation in the CAPL editor. For a better overview, all necessary function calls are listed below:</p>
                    <div>
                        <p class="SourceCode">export testfunction ImplementTest()<br />{<br />&#160;&#160;double curFlowRate;<br />&#160;&#160;byte counter;<br /></p>
                        <p class="SourceCode">// Wait for initialization of TC<br />&#160;&#160;Wait(7000);<br /></p>
                        <p class="SourceCode">// 1. Start task on TC<br />&#160;&#160;TCIL_StartTask(TC);<br />&#160;&#160;Wait(2000);</p>
                        <p class="SourceCode">// 2. Define Setpoint Activation Rate<br />&#160;&#160;TCIL_ValueCommandPhysical(TC, Sprayer, 6/*DDI*/, 2/*elNum*/, 39000/*kg/ha*/);<br />&#160;&#160;Wait(2000);<br /></p>
                        <p class="SourceCode">// 3. Turn ON the Sprayer<br />&#160;&#160;VTIL_PressSoftKey(VT, 151/*keyId*/, 500/*duration*/);<br />&#160;&#160;Wait(1000);<br /></p>
                        <p class="SourceCode">// 4. Activate additional sections<br />&#160;&#160;VTIL_PressSoftKey(VT, 153/*keyId*/, 500/*duration*/);<br />&#160;&#160;Wait(1000);<br />&#160;&#160;VTIL_PressSoftKey(VT, 153/*keyId*/, 500/*duration*/);<br />&#160;&#160;Wait(1000);<br /></p>
                        <p class="SourceCode">// 5. Start moving<br />&#160;&#160;$GBSD_TECU::GroundBasedMachineDirection = VtSig_GroundBasedMachineDirection::Forward;<br />&#160;&#160;$GBSD_TECU::GroundBasedMachineSpeed = 1;<br /></p>
                        <p class="SourceCode">// 6. Slowly increase the speed<br />&#160;&#160;for(counter = 0; counter &lt; 4; counter++)<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;Wait(500);<br />&#160;&#160;&#160;&#160;$GBSD_TECU::GroundBasedMachineSpeed += 2;<br />&#160;&#160;&#160;&#160;Wait(500);<br />&#160;&#160;}</p>
                        <p class="SourceCode">// 7. Check reported flow rate<br />&#160;&#160;TCIL_GetValuePhysical(TC, Sprayer, 37/*DDI*/, 4/*elNum*/, curFlowRate);<br />&#160;&#160;if(curFlowRate &lt; 62 || curFlowRate &gt; 65)<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;testStepFail("CheckReportedFlowRate", "Wrong reported flow rate %f (has to be between 62 and 65)!", curFlowRate);<br />&#160;&#160;&#160;&#160;return;<br />&#160;&#160;}<br />&#160;&#160;testStepPass();<br />}</p>
                    </div>
                </div>
                <div>
                    <h2>Desktops</h2>
                    <p>This configuration contains the following desktops:</p>
                    <div>
                        <h2 class="NavigationS">Setup</h2>
                        <p>A total of five nodes are configured in the Simulation Setup: <span class="GUI">VT</span>, <span class="GUI">TC</span>, <span class="GUI">TECU</span>, <span class="GUI">VT Passive</span>, and <span class="GUI">Sprayer</span>. The <span class="GUI">VT</span>, <span class="GUI">TC</span>, and <span class="GUI">TECU</span> nodes are used to simulate a Virtual Terminal, a Task Controller, and a tractor ECU, which are required in order to execute the test. The <span class="GUI">VT Passive</span> node merely represents the display on the simulated Virtual Terminal and does not send any messages itself. The <span class="GUI">Sprayer</span> node represents the device under test (DUT) and can be replaced by the real DUT.</p>
                        <p>The test process itself can be performed either from a test unit or from a test module. To do so, you can activate either <span class="GUI">TestUnit Sprayer</span> in the <span class="GUI">Test Setup for Test Units</span> or <span class="GUI">TestModule Sprayer</span> in the <span class="GUI">Test Setup for Test Modules</span>.</p>
                    </div>
                    <div>
                        <h2 class="NavigationS">Measurement</h2>
                        <p>On the <span class="GUI">Controls</span> panel, you can monitor what values the Task Controller has sent to the sprayer for the setpoint application rate, what speed the tractor is moving at, and what values are measured for the application rate on the second injector. Furthermore, you can force an error in the second injector by activating the <span class="GUI">Inject Error</span> check box.</p>
                        <p>In the <span class="GUI">VT Passive</span> Virtual Terminal Window, you can monitor the display of the Virtual Terminal, including the user interaction.</p>
                        <p>The <span class="GUI">Trace</span> Trace Window shows all messages relevant to the test process.</p>
                        <p>In the <span class="GUI">TestUnit Sprayer</span> test configuration dialog, you can monitor the test process if <span class="GUI">TestUnit Sprayer</span> is activated (see Desktop <span class="GUI">Setup</span>).</p>
                        <p>In the <span class="GUI">TestModule Sprayer</span> execution dialog, you can monitor the test process if <span class="bold">TestModule Sprayer</span> is activated (see Desktop <span class="GUI">Setup</span>).</p>
                        <p>In the Test Trace Window <span class="GUI">Test Trace</span> the test sequence is protocolled, if the Test Unit <span class="GUI">TestUnit Sprayer</span> is activated.</p>
                    </div>
                </div>
                <p class="LinkList">&#160;</p>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../../../../Shared/HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2023-09-26T19:49:32</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="vConditions.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">CANoe</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded">17 SP3</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../../../../Shared/ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeCANalyzer.xml" data-mc-path-to-help-system="../../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>Master Mode of the LIN Hardware</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../CANoeCANalyzer.htm#Topics/CANoeCANalyzer/LIN/HowTos/LINHardwareMasterMode.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <p class="StructurePath"><a href="../LIN.htm" class="StructurePath">LIN</a> » Master Mode of the LIN Hardware</p>
                <h1><a name="kanchor5367"></a><span class="mc-variable System.Title variable">Master Mode of the LIN Hardware</span>
                </h1>
                <p class="MenuPath">&#160;</p>
                <p class="AutoSearchFilterConcepts"><a name="aanchor7072"></a>
                    <MadCap:concept term="SFCore" />
                </p>
                <div>
                    <h2 class="SectionMain">Working modes</h2>
                    <p>The LIN network interface features two working modes:</p>
                    <ul>
                        <li>In <span class="bold">master mode</span>, the LIN network interface is able to output message headers on the network.</li>
                        <li>Headers sent by an external master are responded to in <span class="bold">slave mode</span>.</li>
                    </ul>
                    <p>The selection of the working mode of a LIN channel has the following individual effects:</p>
                    <div>
                        <h2 class="SectionSub">Master mode:</h2>
                        <ul>
                            <li>The LIN network interface does not respond to received LIN headers of an external master, even if LIN responses are configured by slave nodes defined in the LDF. Only LIN headers which were sent by the LIN network interface itself are responded to.</li>
                            <li>The LIN network interface does not measure any header baudrates. The transmission baudrate is specified by the configuration and cannot be changed.</li>
                            <li>The CAPL functions for transmitting headers (<a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINTransmitHeader.htm" class="SourceCode">linTransmitHeader</a> and <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINOutput.htm" class="SourceCode">output</a> (linFrame) with linFrame.RTR=1) can be called at any time to output LIN headers on the network.</li>
                        </ul>
                    </div>
                    <div>
                        <h2 class="SectionSub">Slave mode:</h2>
                        <ul>
                            <li>The LIN network interface responds to received LIN headers if a response to the LIN ID contained within the header has been configured. A LIN response is configured at the start of a measurement with the initial value defined in the LDF if an LDF is used. During the measurement, the LIN response data can be modified at any time with <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINUpdateResponse.htm" class="SourceCode">linUpdateResponse</a> or by calling the <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINOutput.htm" class="SourceCode">output</a> (linFrame) general function with linFrame.RTR=0.</li>
                            <li>The network interface measures the baudrate of the sync byte of each header received to then adapt the transmission baudrate to the measured receive baudrate. For this reason, a LIN header should not be sent on a LIN channel of the network interface in slave mode (for example using the Bitstream functions; see <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINSendBitStream.htm" class="SourceCode">linSendBitStream</a>). In this case, the LIN channel measures the baudrate of the header which it itself had sent. As the measurement is subject to quantization and cannot be exact, the baudrate begins to drift until it exits the tolerance range (15%).</li>
                            <li>The CAPL functions for direct transmission of LIN headers (<a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINTransmitHeader.htm" class="SourceCode">linTransmitHeader</a> or <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINOutput.htm" class="SourceCode">output</a>(linFrame) with linFrame.RTR=1) have no effect.</li>
                        </ul>
                    </div>
                </div>
                <div>
                    <h2 class="SectionMain">Selection of the master mode in CANoe</h2>
                    <p>If an LDF was assigned to the channel in <span class="Product">CANoe</span>and the master node defined in the LDF was assigned to a node <MadCap:conditionalText data-mc-conditions="vConditions.CANalyzerExclude">in the Simulation Setup</MadCap:conditionalText>, the channel is configured for master mode. In this case, a LIN schedule is also configured automatically. The LIN scheduler automatically outputs LIN headers in accordance with the schedule tables defined in the LDF. The scheduler can be controlled in different ways (CAPL function, LIN Interactive Scheduler (new), LIN Interactive Master (old)).</p>
                    <p>Master mode can also be activated using the check box in the <a href="../../Ribbon/Hardware/NetworkHardware/NetworkHardwareLIN.htm" class="bold">Network Hardware Configuration</a> dialog.</p>
                    <p>With <span class="Product">CANoe</span>version 11.0 and higher, the channel mode can also be changed during the measurement. This occurs by calling up the <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINSetChannelMasterMode.htm" class="SourceCode">linSetChannelMasterMode</a> CAPL function. This makes it possible to activate an externally connected master during the measurement and to switch to a hardware master ECU simulated in <span class="Product">CANoe</span> without having to end the measurement and reconfigure the channel for this. The <span class="SourceCode">linGetChannelMasterMode</span> CAPL function makes it possible to query the channel mode.</p>
                    <p>A driver with LIN firmware version 1.75 or higher is required to use this function. The LIN firmware version can be checked in the Network Hardware Configuration dialog.</p>
                    <div>
                        <h2 class="SectionSub">Baudrate</h2>
                        <p>If the LIN hardware is not in master mode, the <a href="../LIN_LIN-Channel_Baudrate.htm">configured baudrate of a LIN channel</a> is used as the starting value for synchronization on an external master clock. The actual baudrate may not deviate by more than ±15% from this starting value.</p>
                    </div>
                    <div>
                        <h2 class="SectionSub">Master terminating resistor</h2>
                        <p>The LIN specification specifies that a master node must link the LIN network with VBAT over a terminating resistor (typically 1 kΩ) and a protective diode.</p>
                        <p>In a <span class="Product">CANoe</span> configuration, the master terminating resistor should be activated consistently with master mode (e.g. the master terminating resistor should only be used with master mode activated).</p>
                        <p>Depending on the scenario, a master terminating resistor could be contained in the external circuitry.</p>
                        <p>For this reason, it is possible to activate or deactivate the resistor independently using the Master Resistor check box in the <a href="../../Ribbon/Hardware/NetworkHardware/NetworkHardwareLIN.htm" class="GUI">Network Hardware Configuration</a> dialog.</p>
                        <p>In addition, the terminating resistor can be activated or deactivated with the <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINSetMasterResistor.htm" class="SourceCode">linSetMasterResistor</a> CAPL function. The state of activation can be queried using the <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINGetMasterResistorState.htm" class="SourceCode">linGetMasterResistorState</a> function.</p>
                    </div>
                    <div>
                        <h2 class="SectionSub">Transmitting LIN headers in CAPL</h2>
                        <p>In most cases, an LDF is used to describe the LIN network. The LIN network nodes defined in the LDF can easily be transferred to <span class="Product">CANoe</span> Simulation Setup. This also configures an LIN scheduler which begins transmitting LIN headers at the start of measurement.</p>
                        <p>In special scenarios, this may be undesirable. Instead, a scheduler is to be implemented in the software by the user with a CAPL program or a DLL.</p>
                        <p>The <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINTransmitHeader.htm" class="SourceCode">linTransmitHeader</a> function is provided in CAPL for this purpose (previously: output(linFrame) with linFrame.RTR=1). DLLs such as those created using the vVirtualTarget product from Vector use internal interfaces with the same functions.</p>
                    </div>
                    <div data-mc-conditions="vConditions.CANalyzerExclude">
                        <h2 class="SectionSub">Interrupting transmission procedures</h2>
                        <p>A use case for simulations in CANoe is mapping the behavior of a real ECU as precisely as possible.</p>
                        <p>One potential difficulty here is that the LIN network interface may insert orders to output LIN headers into a queue, but not output headers until the LIN network is inactive for a defined short span of time.</p>
                        <p>In contrast to this, real ECUs transmit LIN headers controlled by timers without consideration of a possible transfer in progress on the network. Any LIN response transfers still in progress are canceled here and overwritten by the LIN header.</p>
                        <p>To model this behavior in CANoe, the <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINSetInterruptingHeaderTransmits.htm" class="SourceCode">linSetInterruptingHeaderTransmits</a> function can be used in conjunction with <a href="../../../CAPLFunctions/LIN/Functions/CAPLfunctionLINTransmitHeader.htm" class="SourceCode">linTransmitHeader</a>. The activation of <span class="GUI">interrupting headers</span> deactivates testing for quiet on the network prior to the transfer of LIN headers. LIN slave responses in progress are overwritten and canceled by transmitting a LIN header. This can be used, for example, to verify the behavior of a real LIN slave ECU in case of LIN master timing which is too close.</p>
                    </div>
                </div>
                <p class="LinkList"><a href="../LIN_LIN-Channel_Baudrate.htm" class="LinkList">Configuring the Baudrate of a LIN Channel</a>&#160;&#160;•&#160;&#160;<a href="../../Ribbon/Hardware/NetworkHardware/NetworkHardwareLIN.htm" class="LinkList">LIN Hardware Configuration</a>&#160;&#160;•&#160;&#160;<a href="LIN_Simulating_LIN-Master.htm" class="LinkList">Simulating a LIN Master</a></p>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../../../Shared/HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2023-09-26T19:49:32</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="vConditions.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">CANoe</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded">17 SP3</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../../../Shared/ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
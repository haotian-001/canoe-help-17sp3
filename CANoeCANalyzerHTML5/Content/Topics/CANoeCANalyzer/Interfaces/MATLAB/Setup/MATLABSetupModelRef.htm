<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeCANalyzer.xml" data-mc-path-to-help-system="../../../../../../" data-mc-conditions="vConditions.CANoeOnly" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../../Skins/Favicons/favicon-16x16.png" /><title>Model Referencing (MATLAB Integration)</title>
        <link href="../../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../../../Resources/Stylesheets/vTableSymbol.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../../CANoeCANalyzer.htm#Topics/CANoeCANalyzer/Interfaces/MATLAB/Setup/MATLABSetupModelRef.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <p class="StructurePath"><a href="../MATLAB.htm" class="StructurePath">MATLAB Integration Package</a> » <a href="../MATLAB.htm#Setup" class="StructurePath">Setup</a> » Model Referencing</p>
                <h1>Model Referencing</h1>
                <p class="MenuPath">&#160;</p>
                <p class="AutoSearchFilterConcepts"><a name="aanchor12442"></a>
                    <MadCap:concept term="SFInterfaces" />
                </p>
                <p><a name="aanchor12443"></a>
                    <MadCap:concept term="MATLABSetup" />
                </p>
                <div>
                    <h2 class="SectionMain">Introduction</h2>
                    <p>Using MATLAB Version R14 or newer it is possible to use model references. Every model may contain one or more instances of a referenced model which in turn may also contain references to other models. The model block which realizes the referencing can be found in the Simulink library.
This feature allows a modular development of Simulink models and might be used to separate <span class="Product">CANoe</span> input/output blocks from application blocks (see next chapter). The <span class="Product">CANoe</span> MATLAB Integration Package supports Model Referencing but some restrictions apply.</p>
                    <div>
                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                            <tbody>
                                <tr>
                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                        <p class="Table">
                                            <img src="../../../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                        <p class="TableSymbolHead">Note</p>
                                        <p class="Table">When building large models with referenced models that are used in simulation nodes (i.e., in any ECU of the Simulation Setup), deactivate the setting <span class="GUI">Target 64 bit CANoe</span>, even if you intend to use a 64 bit <span class="Product">CANoe</span>. The reason is that in a 64 bit <span class="Product">CANoe</span>, the simulation part still runs in 32 bit. As Simulink does not know whether a referenced model is built for a simulation or an analysis model, it has to build it in 32 bit and in 64 bit if the check box is activated. If the check box is deactivated, the referenced model will only be built in 32 bit. This can save a lot of build time for large models.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <h2 class="SectionMain">Use Case</h2>
                    <p>The main focus of Model Referencing is reusing code without the need to copy it. Several models can reference the same sub model and might use several instances of it. One aspect of this technique is that it allows separating the application code from code used for communication.</p>
                    <div>
                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                            <tbody>
                                <tr>
                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                        <p class="Table">
                                            <img src="../../../../../Resources/vImages/vExample.png" style="width: 48px;height: 45px;" title="Example" alt="Example" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                        <p class="TableSymbolHead">Example</p>
                                        <p>A new algorithm is to be implemented for an ECU and it uses the CAN bus to exchange data with other ECU. In the first development phase the algorithm might be developed with a fixed set of test stimuli as inputs and scopes to validate the outputs:</p>
                                        <p>
                                            <img src="../../../../../Resources/Images/CANoeCANalyzer/MATLi14bTestSimulation_500x211.png" style="width: 500;height: 211;" />
                                        </p>
                                        <p>For the next development step communication with the CAN bus is required. The <span class="Product">CANoe</span> MATLAB Integration Package can be utilized to test the algorithm with either simulated bus communication or up to create a realtime prototype that communicates with real network interfaces; see <a href="../MATLABExecutionModes.htm">Execution Modes</a>. No modification of the algorithm itself is necessary if it is referenced by a model that uses the <span class="Product">CANoe</span> I/O library blocks:</p>
                                        <p>
                                            <img src="../../../../../Resources/Images/CANoeCANalyzer/MATLi14cTestCANoe_500x214.png" style="width: 500;height: 214;" />
                                        </p>
                                        <p>In the last step the algorithm can be referenced by a model which targets the real ECU hardware. Instead of the <span class="Product">CANoe</span> input and output blocks the ECU’s communication interfaces must be used instead.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div>
                    <h2 class="SectionMain">Multitasking Mode</h2>
                    <p>Model referencing is supported in multitasking mode, but setting up the referenced model can be quite tricky due to Simulink constraints. In your referenced model, use the following settings for tasking mode and sample time.</p>
                    <ul>
                        <li><span class="GUI">Fixed step size</span>: auto<br />Exception: If your model contains only one specified sample time and at least one block with continuous sample time, set the fixed step size to the fixed step size of the parent model.</li>
                        <li><span class="GUI">Periodic sample time constraint</span>: Unconstrained</li>
                    </ul>
                    <p>If your model neither uses any explicit sample time nor blocks with continuous states, the input ports can inherit their sample time from the parent model. Note that in this case, all input ports must have the same sample time. In all other cases, the sample times of the input ports must be specified.</p>
                    <p>For more information about sample times in referenced models, see the <a href="https://www.mathworks.com/help/simulink/ug/inherit-sample-times-for-model-referencing-1.html" class="ExternalLink" target="_blank">MATLAB help</a>.</p>
                </div>
                <div>
                    <h2 class="SectionMain">Limitations</h2>
                    <p>Among the various points described in the MATLAB help (see <span class="bold">Simulink Model Referencing Limitations</span>) the following limitations apply when using Model Referencing with the <span class="Product">CANoe</span> MATLAB Integration Package:</p>
                    <ul>
                        <li>The same <span class="Product">CANoe</span> target file (cn_*.tlc) must be selected for all models (parent and sub models).</li>
                        <li>The <span class="bold">CN code generation options</span> must not differ between the models.</li>
                        <li>Simulink allows to share the configuration between multiple models, this simplifies keeping the configuration of referenced Models identical. Search the MATLAB help for <span class="bold">Share a Configuration with Multiple Models</span>.</li>
                        <li>In combination with parameterization, the general limitations of the Simulink Coder apply(see <span class="bold">Parameterizing Model References</span> in the Simulink help).</li>
                        <li>Models referencing other models need the <span class="bold">Inline parameters</span> option  in the configuration settings to be enabled.</li>
                        <li><span class="Product">CANoe</span> I/O blocks must not be used in referenced models.</li>
                    </ul>
                </div>
                <p class="LinkList"><a class="MCHelpControl MCHelpControl-Concept conceptLink" data-mc-concepts="MATLABSetup" href="javascript:void(0);" data-mc-topics="CANoe Interaction Layer (MATLAB Integration)|MATLABSetupIL.htm#aanchor1582||Configuration and Test of CANoe Simulink Blocks (MATLAB Integration)|MATLABSetupConfigTest.htm#aanchor10139||Connect Simulink with CANoe|MATLABSimulinkWithCANoe.htm#aanchor1107||Customizing for Calibration using XCP (MATLAB Integration)|MATLABSetupCustCalXCP.htm#aanchor11214||Customizing for Multitasking Environment|MATLABSetupCustMultitasking.htm#aanchor3797||Customizing for Parameterization from CANoe (MATLAB Integration)|MATLABSetupCustParamCANoe.htm#aanchor8383||HIL Mode - CANoe Configuration (MATLAB Integration)|MATLABhilModeCANoeConfig.htm#aanchor9100||HIL Mode - Simulink Configuration (MATLAB Integration)|MATLABSetupCustIntCANoe.htm#aanchor10701||Installation of the MATLAB Integration Package|MATLABInstallation.htm#aanchor6709||Introduction (MATLAB Integration)|MATLABSetupIntroduction.htm#aanchor7352||Model Referencing (MATLAB Integration)|#aanchor12443||Offline Mode / Synchronous Mode - Simulink and CANoe (MATLAB Integration)|MATLABOffSynchSimuCANoe.htm#aanchor12708||Stateflow Charts (MATLAB Integration)|MATLABSetupStateflowCharts.htm#aanchor7329"><span class="MCHelpControl-ConceptHotSpot_"><img class="MCHelpControl_Image_Icon" src="../../../../../../Skins/Default/Stylesheets/Images/transparent.gif" height="14" width="16" alt="Concept Link Icon" />See Also</span></a>
                </p>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../../../../Shared/HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2023-09-26T19:49:32</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="vConditions.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">CANoe</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded">17 SP3</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../../../../Shared/ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="topic" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeCANalyzer.xml" data-mc-path-to-help-system="../../../../../" data-mc-conditions="vConditions.CANoeOnly" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" /><title>Node Control</title>
        <link href="../../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../../Resources/Stylesheets/vTable.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../../Resources/Stylesheets/vTableSymbol.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../../CANoeCANalyzer.htm#Topics/CANoeCANalyzer/CANopen/Nodelayer/nodecontrolintro.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <p class="StructurePath"><a href="../startpageCANopen.htm" class="StructurePath">CANopen</a> » <a href="CANopenNLOverview.htm" class="StructurePath">CANopen Node Layer</a> » <span class="mc-variable System.Title variable">Node Control</span></p>
                <h1><span class="mc-variable System.Title variable">Node Control</span> (deprecated)</h1>
                <p class="MenuPath">&#160;</p>
                <p class="AutoSearchFilterConcepts"><a name="aanchor2698"></a>
                    <MadCap:concept term="SFCore" />
                </p>
                <p>The functions in this group handle the local control of the simulated ECU.</p>
                <h2>Access to the Local Node State</h2>
                <p>The simulated <a href="../popups/canopen.htm" class="MCTopicPopup MCTopicPopupHotSpot a aPopup" data-mc-width="auto" data-mc-height="auto">CANopen</a> ECU has a built-in status machine that knows the specifications of <a href="../OptionCANopen/referencesCANopen.htm" class="MCTopicPopup MCTopicPopupHotSpot a">/2/</a> the states <span class="bold">Operational</span>, <span class="bold">Pre-Operational</span>, <span class="bold">Reset Node</span>, <span class="bold">Reset Communication</span>, and <span class="bold">Stopped</span>. With the functions coGetLocalState and coSetLocalState, the local state can be read and changed.</p>
                <p>Each change of the local communication state is signaled by the event function coOnNodeChangedState. The corresponding action for this state change can be entered here.</p>
                <div>
                    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                        <col class="TableStyle-vTableSymbol-Column-Column1" />
                        <col class="TableStyle-vTableSymbol-Column-Column2" />
                        <tbody>
                            <tr>
                                <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                    <p class="Table">
                                        <img src="../../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                    </p>
                                </td>
                                <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                    <p class="TableSymbolHead">Note</p>
                                    <p class="Table">The CANopen node layer is still supported for capability with  versions up to and including 9.0 SP6.</p>
                                    <p class="Table">It was replaced by the CANopen <a href="../OptionCANopen/extensionsProCANopen.htm#SimulationConcept">Simulation Concept</a> that is supported starting with <span class="Product">CANoe</span> 10.0.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h2>Start and Stop the Node Layer for a Node</h2>
                <p>After the node layer was started for a node, a boot-up is executed for this node. This boot-up can be configured largely via entries in the object dictionary. Of course these entries must already be created.</p>
                <div>
                    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                        <col class="TableStyle-vTableSymbol-Column-Column1" />
                        <col class="TableStyle-vTableSymbol-Column-Column2" />
                        <tbody>
                            <tr>
                                <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                    <p class="Table">
                                        <img src="../../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                    </p>
                                </td>
                                <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                    <p class="TableSymbolHead">Note</p>
                                    <p class="Table">A simulated ECU can also be started completely without object dictionary entries. In this case only the boot-up message is sent out. Access to the local object dictionary is possible, however it is always answered with an abort (object not available).</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                        <col class="TableStyle-vTableSymbol-Column-Column1" />
                        <col class="TableStyle-vTableSymbol-Column-Column2" />
                        <tbody>
                            <tr>
                                <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                    <p class="TableHead">
                                        <img src="../../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                    </p>
                                </td>
                                <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                    <p class="TableSymbolHead">Note</p>
                                    <p class="Table">If no object 1200h is found at start up, the default SDO server (according to CiA301) is created. Furthermore all default SDO clients are created when no objects of the range 1280h..128Fh are found.</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <p>If the node is configured as NMT slave (see object <a href="ObjectDictionary/ObjectDictionaryMaster.htm">1F80</a> Bit 0), then the following actions are executed on boot-up:</p>
                <ol>
                    <li value="1">If the object dictionary for the node has been stored via the "Store/Restore" interface (object <a href="ObjectDictionary/ObjectDictionaryMaster.htm">1010/1011</a> ), then the object dictionary of the node is initialized with this information.</li>
                    <li value="2">The node sends the boot-up message and goes into the pre-operational state.</li>
                    <li value="3">If the node is "autostart" capable (see object <a href="ObjectDictionary/ObjectDictionaryMaster.htm">1F80</a> Bit 2), then it goes over to Operational independently.</li>
                </ol>
                <p>If the node is configured as NMT master, then the following steps are executed:</p>
                <ol>
                    <li value="1">If the object dictionary for the node has been stored via the "Store/Restore" interface (object <a href="ObjectDictionary/ObjectDictionaryMaster.htm">1010/1011</a> ), then the object dictionary of the node is initialized with this information.</li>
                    <li value="2">The node sends the boot-up message and goes into the pre-operational state.</li>
                    <li value="3">The assigned NMT slaves are searched for according to the details in the object dictionary (see <a href="ObjectDictionary/ObjectDictionaryMaster.htm">object 1F81</a>), configured (via the configuration manager), and started. Basis for the start procedure is the procedure in <a href="../OptionCANopen/referencesCANopen.htm" class="MCTopicPopup MCTopicPopupHotSpot a">/3/</a>.</li>
                </ol>
                <p>During the boot procedure, depending on the configuration, the node reports various events via the event function coOnConfigReady . There can and should be a reaction to some of these events.</p>
                <p>The emergency message is used in order to communicate error states of the node in a standardized way via the bus. In addition to the error codes specified in <a href="../OptionCANopen/referencesCANopen.htm" class="MCTopicPopup MCTopicPopupHotSpot a">/2/</a>, many device profiles define additional error codes. On occurrence of an error, the function coEmergency is called with the parameter active = 1. If the error cause is eliminated, the function is called again for the same error code with the parameter active = 0. Thus the error is removed again from the object "predefined error field." In both cases, however, an emergency messages is sent.</p>
                <p>For particular internal events, the node layer sends an emergency message independently. The following table lists these events.</p>
                <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../../Resources/Stylesheets/vTable.css');" width="100%" class="TableStyle_vTable" cellspacing="0">
                    <col />
                    <col />
                    <thead>
                        <tr>
                            <th class="TableStyle_vTable_Head_0_0_RowSep_ColSep">
                                <p class="TableHead">EMCY&#160;Context (hex)</p>
                            </th>
                            <th class="TableStyle_vTable_Head_0_0_RowSep_ColEnd">
                                <p class="TableHead">Description</p>
                            </th>
                        </tr>
                    </thead>
                    <tr style="height: 33px;" valign="top">
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">30 81 xx 00 00 00 00 00</p>
                        </td>
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">A heartbeat event occurred.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">20 81 xx 00 00 00 00 00</p>
                        </td>
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">The CAN controller is in the state error passive.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">10 81 xx 00 00 00 00 00</p>
                        </td>
                        <td class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">An overrun occurred. Thus messages have also been lost.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">40 81 xx 00 00 00 00 00</p>
                        </td>
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">The stack was in the BUS_OFF state.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">10 82 xx 00 00 00 00 00</p>
                        </td>
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">For a received PDO, the length was smaller than expected. The PDO was not processed.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">20 82 xx 00 00 00 00 00</p>
                        </td>
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">For a received PDO, the length was greater than expected.</p>
                        </td>
                    </tr>
                    <tr style="height: 33px;" valign="top">
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                            <p class="Table">61 61 xx yy 00 00 00 00</p>
                        </td>
                        <td colspan="1" rowspan="1" class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                            <p class="Table">For the stored object dictionary &#160;a corrupt checksum was determined. If yy != 0, then the error is in the CMT. <br />Here the following values can occur:</p>
                            <p class="Table">1 - identifier for CMT record not present<br />2 - cache management inconsistent<br />3 - SDO could not be sent<br />4 - configuration entry inconsistent<br />5 - checksum error<br />6 - data could not be taken over into the non-permanent memory<br />7 - SDO time-out<br />8 - SDO error</p>
                        </td>
                    </tr>
                </table>
                <p class="LinkList">&#160;</p>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../../../Shared/HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2023-09-26T19:49:32</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="vConditions.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">CANoe</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded">17 SP3</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../../../Shared/ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>
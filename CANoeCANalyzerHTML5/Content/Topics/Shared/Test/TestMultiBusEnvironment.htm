<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="" data-mc-search-type="Stem" data-mc-help-system-file-name="CANoeCANalyzer.xml" data-mc-path-to-help-system="../../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../../../Skins/Favicons/browserconfig.xml" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" /><title>Multibus Environment</title>
        <link href="../../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../../Resources/Stylesheets/vTableMasterPageHeader.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../Resources/Stylesheets/vStylesheet.css" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.expand-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.remove-highlight-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.button.collapse-all-button
{
	-pie-background: linear-gradient(#ffffff, #ffffff);
}

.needs-pie
{
	behavior: url('../../../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../../Resources/Stylesheets/vTable.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link href="../../../Resources/Stylesheets/vTableSymbol.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/foundation.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlobal.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapUtilities.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapXhr.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTextEffects.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSlideshow.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapMessageBus.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapMessageBus.CrossFrame.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapDefault.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapMediaQueries.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAccessibility.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapHelpSystem.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapAliasFile.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopicFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedbackHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSkinHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.Breadcrumbs.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.MiniToc.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapToc.SideMenu.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapIndex.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapGlossary.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapParser.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearch.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapNavigateTopics.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapLms.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapELearning.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopic.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapFeedback.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapMicroContentComponent.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapSearchHelper.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTopicElements.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../../../Resources/Scripts/MadCapTriPane.js" type="text/javascript" defer="defer">
        </script>
        <script type="text/jscript" src="../../../Resources/vScripts/SyntaxHighlighting.js">
        </script>
        <script type="text/jscript" src="../../../Resources/vScripts/TabSwitch.js">
        </script>
        <script type="text/javascript" src="../../../Resources/vScripts/Vector.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../../CANoeCANalyzer.htm#Topics/Shared/Test/TestMultiBusEnvironment.htm">Open topic with navigation</a>
        </p>
        <div class="Body">
            <div role="main" id="mc-main-content">
                <div data-mc-conditions="vConditions.CANalyzerExclude">
                    <div>
                        <p class="StructurePath" data-mc-conditions="vConditions.vTESTstudioExcluded"><a href="../../CANoeCANalyzer/Test/TestFeatures.htm" class="StructurePath"><a href="../../CANoeCANalyzer/CANoeCANalyzer.htm" class="StructurePath" data-mc-conditions="vConditions.CANalyzerExclude,vConditions.CANoe4ServerExcluded,vConditions.CANoe4SWExcluded,vConditions.TestDataEditorExcluded,vConditions.vTESTstudioExcluded,vConditions.TestUnitRunnerExcluded,vConditions.CANoeNMExcluded"><img src="../../../Resources/vImages/vToolIcons/CANoe_Icon16.png" alt="" />&#160;CANoe</a> » Test</a> » <span class="mc-variable System.Title variable">Multibus Environment</span></p>
                        <h1><span class="mc-variable System.Title variable">Multibus Environment</span>
                        </h1>
                        <p class="MenuPath">&#160;</p>
                        <p class="AutoSearchFilterConcepts"><a name="aanchor4609"></a>
                            <MadCap:concept term="SFCore" />
                        </p>
                        <p class="IndexConcept"><a name="kanchor3488"></a>
                        </p>
                    </div>
                    <h2 class="SectionSub">Use of Test Functions in a Multi-Bus Environment</h2>
                    <p>In a multi-bus environment, the right bus context must be set before calling any test functions that are used for processing and monitoring of database objects. Otherwise, for example, the required event handlers will be registered on the wrong bus, thereby preventing correct execution. Depending on the parameters and database scenarios used, this is not always necessary because the bus context can be automatically determined internally.</p>
                    <p>The following table shows the database scenarios and parameters for which the bus context has to be set correctly before calling a test function.</p>
                    <div>
                        <table style="margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/Stylesheets/vTable.css');" class="TableStyle_vTable" cellspacing="0">
                            <col style="width: 282px;" />
                            <col />
                            <col />
                            <col />
                            <col />
                            <tbody>
                                <tr>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="TableBold" style="text-align: right;">Parameter type:</p>
                                    </th>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p>MessageID (dword)</p>
                                    </th>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p>Database Objects (char[])</p>
                                    </th>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p>Message/dbMessage<br />Node/dbNode<br />dbSignal</p>
                                    </th>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                                        <p>Signal</p>
                                    </th>
                                </tr>
                                <tr>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p>Database assigned to only one bus</p>
                                    </th>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">—</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                                        <p class="Table">—</p>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p>Same database assigned to multiple buses (shortcut)</p>
                                    </th>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowSep_ColEnd">
                                        <p class="Table">—</p>
                                    </td>
                                </tr>
                                <tr>
                                    <th class="TableStyle_vTable_Body_0_0_RowEnd_ColSep">
                                        <p>Identically named database objects in different databases on different buses</p>
                                    </th>
                                    <td class="TableStyle_vTable_Body_0_0_RowEnd_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowEnd_ColSep">
                                        <p class="Table">✔</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowEnd_ColSep">
                                        <p class="Table">—</p>
                                    </td>
                                    <td class="TableStyle_vTable_Body_0_0_RowEnd_ColEnd">
                                        <p class="Table">—</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                            <tbody>
                                <tr>
                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                        <p class="Table">
                                            <img src="../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                        <p class="TableSymbolHead">Note</p>
                                        <p class="Table">Automatic determination of the bus context is only possible with explicitly qualified database objects. A warning is displayed in the <span class="Product">CAPL&#160;Browser</span> and when compiling in the case of database objects that are not explicitly qualified.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h2 class="SectionSub">Changeover of the Bus Context</h2>
                    <p>The bus context to be utilized can be queried with the CAPL function <a href="../../CAPLFunctions/Other/Functions/CAPLfunctionGetBusNameContext.htm">GetBusNameContext</a> or set with the CAPL function <a href="../../CAPLFunctions/Other/Functions/CAPLfunctionSetBusContext.htm">SetBusContext</a>.</p>
                    <div>
                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                            <tbody>
                                <tr>
                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                        <p class="Table">
                                            <img src="../../../Resources/vImages/vExample.png" style="width: 48px;height: 45px;" title="Example" alt="Example" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                        <p class="TableSymbolHead">Example</p>
                                        <p>Two buses exist: <span class="bold">Body</span> and <span class="bold">Engine bus</span>.</p>
                                        <p class="Table">One controller is connected to both buses and has gateway functionality. Now this gateway functionality should be tested. This involves stimulating a message on one bus and then measuring whether the message converted for the second bus appears with the correct signals.</p>
                                        <p class="Table">A <a href="../../CANoeCANalyzer/Test/TestConcept.htm" data-mc-exclude-action="unbind" data-mc-conditions="vConditions.TestDataEditorExcluded,vConditions.vTESTstudioExcluded">test</a> can be created for this and connected to these two buses.</p>
                                        <p class="Table">The CAPL code might look like this:</p>
                                        <p class="TableSourceCode">testcase TestCase1()<br />{<br />&#160;&#160;dword Bus1 = GetBusNameContext("Body bus");<br />&#160;&#160;dword Bus2 = GetBusNameContext("Engine bus");<br />&#160;&#160;message can1.M1_Message Msg1; <span class="CodeComment">// Stimulus message for CAN1</span><br />&#160;&#160;long ret;<br />&#160;&#160;dword lRequestTime;<br /><br />&#160;&#160;Msg1.Sig1 = 17; <span class="CodeComment">// Set some signals for the stimulus message</span><br />&#160;&#160;<span class="bold">SetBusContext(Bus1)</span>;<br />&#160;&#160;lRequestTime = TimeNow();<br />&#160;&#160;output(Msg1); <span class="CodeComment">// Send the message to Bus1</span><br />&#160;&#160;&#160;&#160;<span class="CodeComment">// --- Wait for occurrence of message(s) routed via gateway to Bus2</span><br />&#160;&#160;<span class="bold">SetBusContext(Bus2)</span>;<br />&#160;&#160;ret = TestWaitForMessage(MessageNameOnBus2, 1000);<br />&#160;&#160;if(ret &lt;= 0)<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;write("No Message occurred");<br />&#160;&#160;}<br />&#160;&#160;else<br />&#160;&#160;{<br />&#160;&#160;&#160;&#160;write("Message occurred within time interval %u", (TimeNow() – lRequestTime))<br />&#160;&#160;}<br />&#160;&#160;<span class="CodeComment">// ... Handling of this message</span><br />}</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../../Resources/Stylesheets/vTableSymbol.css');" class="TableStyle-vTableSymbol" cellspacing="0">
                            <col class="TableStyle-vTableSymbol-Column-Column1" />
                            <col class="TableStyle-vTableSymbol-Column-Column2" />
                            <tbody>
                                <tr>
                                    <td class="TableStyle-vTableSymbol-BodyB-Column1-">
                                        <p class="Table">
                                            <img src="../../../Resources/vImages/vInfo.png" style="width: 48px;height: 45px;" title="Note" alt="Note" />
                                        </p>
                                    </td>
                                    <td class="TableStyle-vTableSymbol-BodyA-Column2-">
                                        <p class="TableSymbolHead">Note</p>
                                        <p class="Table">If waiting is to be performed for message events on different buses 
 simultaneously, the <span class="bold">BusContext</span> should be set to the bus on which the message is expected before calling the <a href="../../CAPLFunctions/Test/Functions/CAPLfunctionTestJoinMessageEvent.htm">TestJoinMessageEvent</a> function.</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <p class="LinkList"><a href="../../CANoeCANalyzer/Test/TestFeatureSet/TFSWait.htm" class="LinkList" data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">Wait Points</a> </p>
                </div>
            </div>
        </div>
        <div class="Footer">
            <div class="FooterWhite">
                <table class="FooterWhite" style="border-collapse: collapse;margin-left: auto;margin-right: auto;">
                    <col style="width: 70px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col style="width: 16px;" data-mc-conditions="vConditions.HTML5Link" />
                    <col />
                    <tbody>
                        <tr>
                            <td>
                                <div class="buttons popup-container clearfix topicToolbarProxy topicToolbarProxyFooter _Skins_HTML5TopicToolbar mc-component nocontent">
                                    <div class="button-group-container-left">
                                        <button class="button needs-pie expand-all-button" data-state1-class="expand-all-button" data-state2-class="collapse-all-button" data-state2-title="Collapse all" title="Expand all" data-state1-title="Expand all">
                                            <div>
                                                <div role="img" class="button-icon-wrapper" aria-label="Expand all">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                        <button class="button needs-pie remove-highlight-button" title="Remove Highlights">
                                            <div>
                                                <div role="img" class="button-icon-wrapper">
                                                    <div class="button-icon"> </div>
                                                </div>
                                            </div>
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <p class="vec_BuildInfo"><a href="../HowToUseOnlineHelp.htm" title="Tips for using the help" alt="Tips for using the help"><img src="../../../Resources/vImages/vBackstage/vHelpInfo.png" /></a>
                                </p>
                            </td>
                            <td>
                                <p class="vec_BuildInfo" style="text-align: right;"><span class="mc-variable Vector.BuildTime variable">2023-09-26T19:49:32</span>
                                </p>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <table style="width: 100%;border-collapse: separate;border-spacing: 3px 0px;margin-left: auto;margin-right: auto;caption-side: top;">
                <col />
                <col />
                <col />
                <col data-mc-conditions="vConditions.HTML5Link" />
                <tbody>
                    <tr>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;">
                            <p class="vec_Footer">©&#160;Vector Informatik GmbH</p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 5pt;text-align: right;">
                            <p class="vec_FooterBold">
                                <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded,vConditions.TestDataEditorExcluded">CANoe</MadCap:conditionalText> Version <MadCap:conditionalText data-mc-conditions="vConditions.vTESTstudioExcluded">17 SP3</MadCap:conditionalText></p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="../ContactCopyrightLicense.htm" class="vec_Footer MCXref xref xrefvec_Footer">Contact/Copyright/License</a>
                            </p>
                        </td>
                        <td style="background-color: #b70032;padding-left: 5pt;padding-right: 5pt;padding-top: 5pt;padding-bottom: 0pt;text-align: right;">
                            <p class="vec_Footer"><a href="https://www.vector.com/int/en/company/get-info/privacy-policy/" target="_blank" class="vec_Footer">Data Privacy Notice</a>
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </body>
</html>